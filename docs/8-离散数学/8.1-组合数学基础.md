# 导航 | Navigation

- 前置：[`5.1-三角函数基础`](../../5-三角学/5.1-三角函数基础.md)
- 后续：[`10.1-线性代数基础`](../../10-线性代数/10.1-线性代数基础.md)
- 并列：[`7.1-概率论基础`](../../7-概率与统计/7.1-概率论基础.md)，[`9.1-数学建模基础`](../../9-数学建模/9.1-数学建模基础.md)

## 组合数学基础 | Combinatorics Basics

## 概述

组合数学是研究离散对象排列、组合、计数等问题的数学分支，是离散数学的重要组成部分。组合数学不仅在数学理论中有重要地位，在计算机科学、统计学、密码学等领域也有广泛应用。理解组合数学对于学习算法、概率论、图论等课程具有重要意义。

## 基本计数原理

### 1. 加法原理

```text
定义：如果完成一件事有n种不同的方法，第i种方法有mᵢ种不同的选择，则完成这件事共有m₁ + m₂ + ... + mₙ种不同的方法。

条件：各种方法之间互斥（不能同时使用）

例子：
- 从北京到上海，可以坐飞机（3个航班）或坐火车（2个车次），共有3 + 2 = 5种选择
- 一个班级有男生20人，女生15人，选一个学生代表有20 + 15 = 35种选择
```

### 2. 乘法原理

```text
定义：如果完成一件事需要n个步骤，第i个步骤有mᵢ种不同的选择，则完成这件事共有m₁ × m₂ × ... × mₙ种不同的方法。

条件：各个步骤之间独立（每个步骤的选择不影响其他步骤）

例子：
- 从北京到上海再到广州，北京到上海有3种选择，上海到广州有4种选择，共有3 × 4 = 12种选择
- 一个三位数的密码，每位可以是0-9，共有10 × 10 × 10 = 1000种可能
```

### 3. 容斥原理

```text
定义：设A₁, A₂, ..., Aₙ是有限集合，则：
|A₁ ∪ A₂ ∪ ... ∪ Aₙ| = Σ|Aᵢ| - Σ|Aᵢ ∩ Aⱼ| + Σ|Aᵢ ∩ Aⱼ ∩ Aₖ| - ... + (-1)ⁿ⁻¹|A₁ ∩ A₂ ∩ ... ∩ Aₙ|

应用：计算多个集合的并集大小

例子：
- 在1到100中，能被2或3整除的数的个数
- 设A = {能被2整除的数}，B = {能被3整除的数}
- |A ∪ B| = |A| + |B| - |A ∩ B| = 50 + 33 - 16 = 67
```

## 排列

### 1. 排列的定义

```text
定义：从n个不同元素中取r个元素，按一定顺序排列，称为n个元素中取r个元素的排列，记作P(n,r)或A(n,r)

公式：P(n,r) = n!/(n-r)! = n(n-1)(n-2)...(n-r+1)

性质：
- P(n,n) = n!
- P(n,1) = n
- P(n,0) = 1

例子：
- 从5个人中选3个人排成一队：P(5,3) = 5!/(5-3)! = 60
- 从26个字母中选4个字母排列：P(26,4) = 26!/(26-4)! = 26×25×24×23
```

### 2. 全排列

```text
定义：n个不同元素的所有排列称为全排列，个数为n!

性质：
- n! = n × (n-1)!
- 0! = 1
- n! = n × (n-1) × (n-2) × ... × 2 × 1

例子：
- 3个字母A、B、C的全排列：ABC, ACB, BAC, BCA, CAB, CBA，共6 = 3!种
- 5个人围成一圈的不同坐法：4! = 24种（固定一个人的位置）
```

### 3. 圆排列

```text
定义：n个不同元素围成一圈的排列称为圆排列，个数为(n-1)!

原因：圆排列中，旋转不产生新的排列

例子：
- 5个人围成一圈：4! = 24种
- 8个珠子串成手链：(8-1)!/2 = 2520种（考虑翻转对称）
```

### 4. 重复排列

```text
定义：从n个不同元素中取r个元素，允许重复，按一定顺序排列，个数为nʳ

条件：元素可以重复使用

例子：
- 三位数的个数：9 × 10 × 10 = 900（首位不能为0）
- 4位密码，每位可以是0-9：10⁴ = 10000
```

## 组合

### 1. 组合的定义

```text
定义：从n个不同元素中取r个元素，不考虑顺序，称为n个元素中取r个元素的组合，记作C(n,r)或(n,r)

公式：C(n,r) = n!/[r!(n-r)!] = P(n,r)/r!

性质：
- C(n,r) = C(n,n-r)
- C(n,0) = C(n,n) = 1
- C(n,1) = C(n,n-1) = n

例子：
- 从5个人中选3个人组成委员会：C(5,3) = 5!/(3!2!) = 10
- 从52张扑克牌中选5张：C(52,5) = 52!/(5!47!) = 2598960
```

### 2. 组合的性质

```text
基本性质：
- C(n,r) = C(n,n-r)（对称性）
- C(n,0) = C(n,n) = 1
- C(n,1) = C(n,n-1) = n

递推关系：
- C(n,r) = C(n-1,r) + C(n-1,r-1)（帕斯卡恒等式）
- C(n+1,r+1) = C(n,r) + C(n,r+1)

求和公式：
- C(n,0) + C(n,1) + ... + C(n,n) = 2ⁿ
- C(n,0) - C(n,1) + C(n,2) - ... + (-1)ⁿC(n,n) = 0
```

### 3. 重复组合

```text
定义：从n个不同元素中取r个元素，允许重复，不考虑顺序，个数为C(n+r-1,r)

公式：C(n+r-1,r) = (n+r-1)!/[r!(n-1)!]

例子：
- 从3种水果中选5个（可以重复）：C(3+5-1,5) = C(7,5) = 21
- 方程x₁ + x₂ + x₃ = 5的非负整数解的个数：C(3+5-1,5) = 21
```

## 二项式定理

### 1. 二项式定理

```text
定理：(a + b)ⁿ = ΣC(n,k)aⁿ⁻ᵏbᵏ，其中k从0到n

展开式：(a + b)ⁿ = C(n,0)aⁿ + C(n,1)aⁿ⁻¹b + C(n,2)aⁿ⁻²b² + ... + C(n,n)bⁿ

例子：
- (x + y)³ = C(3,0)x³ + C(3,1)x²y + C(3,2)xy² + C(3,3)y³ = x³ + 3x²y + 3xy² + y³
- (1 + x)⁴ = 1 + 4x + 6x² + 4x³ + x⁴
```

### 2. 二项式系数

```text
定义：C(n,k)称为二项式系数

性质：
- C(n,k) = C(n,n-k)（对称性）
- C(n,k) = C(n-1,k) + C(n-1,k-1)（帕斯卡恒等式）
- C(n,0) + C(n,1) + ... + C(n,n) = 2ⁿ

应用：
- 计算多项式展开
- 解决计数问题
- 概率计算
```

### 3. 二项式定理的应用

```text
多项式展开：
- 计算(a + b + c)ⁿ的展开式
- 计算(1 + x + x²)ⁿ的展开式

计数问题：
- 计算n个元素的子集个数
- 计算n位二进制数的个数

概率问题：
- 二项分布的概率计算
- 组合概率的计算
```

## 鸽巢原理

### 1. 鸽巢原理

```text
原理：如果有n个鸽子放入m个鸽巢中，且n > m，则至少有一个鸽巢中有⌈n/m⌉个或更多的鸽子。

简单形式：如果有n个物体放入m个盒子中，且n > m，则至少有一个盒子中有2个或更多的物体。

例子：
- 在13个人中，至少有2个人出生在同一个月份
- 在任意5个整数中，至少有2个数的差是4的倍数
```

### 2. 鸽巢原理的应用

```text
存在性问题：
- 证明在任意n个整数中，存在连续子序列的和是n的倍数
- 证明在任意n个实数中，存在两个数的差小于1/(n-1)

构造性问题：
- 构造一个序列，使得任意连续子序列的和都不等于某个值
- 构造一个图，使得任意两个顶点的度数差不超过1
```

### 3. 广义鸽巢原理

```text
原理：如果有n个物体放入m个盒子中，则至少有一个盒子中有⌈n/m⌉个或更多的物体。

应用：
- 在任意n个整数中，存在⌈n/k⌉个数，它们的和是k的倍数
- 在任意n个实数中，存在⌈n/k⌉个数，它们的平均值在某个范围内
```

## 容斥原理

### 1. 容斥原理

```text
原理：设A₁, A₂, ..., Aₙ是有限集合，则：
|A₁ ∪ A₂ ∪ ... ∪ Aₙ| = Σ|Aᵢ| - Σ|Aᵢ ∩ Aⱼ| + Σ|Aᵢ ∩ Aⱼ ∩ Aₖ| - ... + (-1)ⁿ⁻¹|A₁ ∩ A₂ ∩ ... ∩ Aₙ|

特殊情况：
- 两个集合：|A ∪ B| = |A| + |B| - |A ∩ B|
- 三个集合：|A ∪ B ∪ C| = |A| + |B| + |C| - |A ∩ B| - |A ∩ C| - |B ∩ C| + |A ∩ B ∩ C|
```

### 2. 容斥原理的应用

```text
计数问题：
- 计算1到n中不能被2、3、5整除的数的个数
- 计算n个元素的错位排列的个数

概率问题：
- 计算多个事件至少发生一个的概率
- 计算多个事件都不发生的概率

数论问题：
- 计算与n互质的数的个数（欧拉函数）
- 计算满足某些条件的数的个数
```

### 3. 错位排列

```text
定义：n个元素的排列中，没有元素在原来位置的排列称为错位排列，记作D(n)

递推关系：D(n) = (n-1)[D(n-1) + D(n-2)]

初始条件：D(1) = 0, D(2) = 1

通项公式：D(n) = n!Σ(-1)ᵏ/k!，k从0到n

例子：
- D(3) = 2（排列：231, 312）
- D(4) = 9
- D(5) = 44
```

## 生成函数

### 1. 生成函数的概念

```text
定义：对于序列{a₀, a₁, a₂, ...}，其生成函数为A(x) = Σaₙxⁿ

性质：
- 加法：(aₙ + bₙ)的生成函数为A(x) + B(x)
- 乘法：(Σaᵢbₙ₋ᵢ)的生成函数为A(x)B(x)
- 移位：xᵏA(x)对应序列{0, 0, ..., 0, a₀, a₁, ...}

例子：
- 序列{1, 1, 1, ...}的生成函数：1/(1-x)
- 序列{1, 2, 3, ...}的生成函数：1/(1-x)²
- 序列{C(n,0), C(n,1), ..., C(n,n)}的生成函数：(1+x)ⁿ
```

### 2. 生成函数的应用

```text
计数问题：
- 计算方程x₁ + x₂ + ... + xₖ = n的非负整数解的个数
- 计算n个元素的子集个数

递推关系：
- 求解斐波那契数列
- 求解卡特兰数列

概率问题：
- 计算随机变量的矩
- 计算概率分布
```

### 3. 指数生成函数

```text
定义：对于序列{a₀, a₁, a₂, ...}，其指数生成函数为A(x) = Σaₙxⁿ/n!

性质：
- 乘法：A(x)B(x)对应序列{ΣC(n,k)aₖbₙ₋ₖ}

应用：
- 计算排列数
- 计算组合数
- 解决排列组合问题
```

## 学习要点

### 1. 概念理解

- 理解基本计数原理
- 掌握排列组合的概念
- 理解鸽巢原理和容斥原理

### 2. 技能掌握

- 熟练掌握排列组合的计算
- 掌握二项式定理的应用
- 学会运用生成函数

### 3. 应用能力

- 在实际问题中应用组合数学
- 利用组合数学解决计数问题
- 理解组合数学在计算机科学中的应用

## 常见错误和注意事项

### 1. 概念错误

```text
错误：混淆排列和组合
正确：排列考虑顺序，组合不考虑顺序

错误：忘记乘法原理的独立性条件
正确：各个步骤必须独立
```

### 2. 计算错误

```text
错误：计算排列时忘记除以重复的排列数
正确：P(n,r) = n!/(n-r)!

错误：计算组合时忘记考虑重复
正确：重复组合使用C(n+r-1,r)
```

### 3. 理解误区

```text
误区：认为所有计数问题都可以用排列组合解决
事实：有些问题需要其他方法，如生成函数、递推等

误区：认为鸽巢原理只能用于存在性证明
事实：鸽巢原理也可以用于构造性问题
```

## 扩展思考

### 1. 历史发展

- 古代：组合数学的起源
- 17世纪：帕斯卡三角形
- 19世纪：现代组合数学的发展

### 2. 现代应用

- 计算机科学：算法分析
- 统计学：抽样理论
- 密码学：密码设计

### 3. 数学哲学

- 组合数学的离散性
- 计数与结构的关系
- 组合数学在数学中的地位

---

> 组合数学是离散数学的重要分支，掌握组合数学对于学习计算机科学和统计学至关重要。通过系统学习组合数学，可以建立坚实的离散数学基础，为学习应用数学奠定基础。
